# How To Quickly Setup A Dev Environment using Node, Webpack, Babel

Use NPM as our Javascript package manager to automatically download and install all of your library needs.

## Create your project directory

`$ mkdir my-project && cd my-directory`

## Create index.html

`subl index.html ( OR code index.html if you use VSCode )`

Create this file inside your project directory and add a standard HTML container and `main.js` reference as provided below.

    <!DOCTYPE html>
    <html lang="en">
    	<head>
    	  <meta charset="utf-8">
    	  <title>JS Lab</title>
    	</head>
    	<body>
    
    	
    	<script src="dist/main.js"></script>
    	</body>
    </html>

## Create index.js

`subl index.js ( OR code index.js if you use VSCode )`

Create this blank file inside of your project directory. 

## Create package.json

`$ npm init -y`

The command above will create your project **`package.json`** file inside of your project directory. 

If you don't use the `-y` flag to accept the default configurations, you will be prompted to answer several questions, which you can ignore by pressing Enter.


## Install Webpack

`$ npm install webpack webpack-cli webpack-dev-server --save-dev`

- Webpack is a JavaScript module bundler (webpack) that automates the bundling of Javascript libraries and files.
- The --save-dev argument  saves it as a development dependency (in ***package.json***), which means it’s a package that you need in your development environment but not on your production server.
- We’re installing three packages as dev dependencies
    - webpack which is the base/core webpack package
    - webpack-cli which enables you to use webpack from the command line
    - webpack-dev-server which is a simple web server with live reloading

## Install Babel

`$ npm install @babel/core @babel/preset-env babel-loader --save-dev`

- Babel will transpile the modern Javascript you will be writing for cross-browser support
- We’re installing three packages as dev dependencies
    - @babel/core is the main part of babel
    - @babel/preset-env is a preset defining which new JavaScript features to transpile
    - babel-loader is a package to enable Babel to work with Webpack.

## Configure Webpack & Babel

`subl webpack.config.js ( OR code webpack.config.js if you use VSCode )`

Create a file called ***webpack.config.js*** with the following contents.

    // webpack.config.js
    module.exports = {
      mode: 'development',
      entry: './index.js',
      output: {
        filename: 'main.js',
        publicPath: 'dist'
      },
      module: {
        rules: [
          {
            test: /\.js$/,
            exclude: /node_modules/,
            use: {
              loader: 'babel-loader',
              options: {
                presets: ['@babel/preset-env']
              }
            }
          }
        ]
      }
    };

We will be writing code in ***index.js*** file and Webpack will bundle this and any require/import statements it finds in this file to create a single output file (which by default is ***dist/main.j***s).

Your ***index.html*** file already has a reference to the file generated by Webpack:

`<script src="dist/main.js"></script>`

We configure Webpack to use ***babel-loader*** by adding the loader property and options object to the list of modules. 

If you want to save `index.js` in a js/ directory simply update your webpack.config.js like so:
Change the entry property to `'./js/index.js'` instead of entry: `'./index.js'`

    // webpack.config.js
    module.exports = {
      mode: 'development',
      entry: './js/index.js',
      output: {
        filename: 'main.js',
        publicPath: 'dist'
      },
    ...

## Configure NPM Scripts

Open your `package.json` file and add the following contents to the SCRIPTS object.

TASK RUNNER NPM SCRIPTS via package.json

Add the following Webpack scripts (build, watch, server) to the SCRIPTS object of your ***package.json*** file.

    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
        "build": "webpack --progress --mode=production",
        "watch": "webpack --progress --watch",
        "server": "webpack-dev-server --open"
      },

### RUNNING SCRIPTS

To run the ***build*** script:

`$ npm run build`

This will run Webpack (using configuration from the ***webpack.config.js*** we made earlier) with the `--progress` option to show the percent progress and the `--mode=production` option to minimize the code for production. 

To run the ***watch*** script:

`$ npm run watch`

This uses the `--watch` option instead to automatically re-run Webpack each time any JavaScript file changes, which is great for development.

To start your dev server and begin writing code:

`$ npm run server`

This will automatically open the **`index.html`** website in your browser with an address of `localhost:8080` (by default). Any time you change your Javascript in **`index.js`**, webpack-dev-server will rebuild its own bundled Javascript and refresh the browser automatically.

